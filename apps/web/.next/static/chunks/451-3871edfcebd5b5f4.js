"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{2451:function(t,e,s){s.d(e,{A:function(){return w},z:function(){return C}});var i,a,n,r,o,h,l,u,d=s(9696),c=s(4522),v=s(3983),p=s(8907),f=s(4644),_=s(1500),y=s(6727),b=s(3071),m=s(8335),w=(i=new WeakMap,a=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,l=new WeakMap,u=new WeakSet,class extends m.F{get meta(){return this.options.meta}get promise(){var t;return null===(t=(0,d._)(this,o))||void 0===t?void 0:t.promise}setOptions(t){if(this.options={...(0,d._)(this,h),...t},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let t=S(this.options);void 0!==t.data&&(this.setState(g(t.data,t.dataUpdatedAt)),(0,v._)(this,i,t))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||(0,d._)(this,n).remove(this)}setData(t,e){let s=(0,_.oE)(this.state.data,t,this.options);return(0,p._)(this,u,F).call(this,{data:s,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),s}setState(t,e){(0,p._)(this,u,F).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var e,s;let i=null===(e=(0,d._)(this,o))||void 0===e?void 0:e.promise;return null===(s=(0,d._)(this,o))||void 0===s||s.cancel(t),i?i.then(_.ZT).catch(_.ZT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState((0,d._)(this,i))}isActive(){return this.observers.some(t=>!1!==(0,_.Nc)(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_.CN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===(0,_.KC)(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!(0,_.Kp)(this.state.dataUpdatedAt,t))}onFocus(){var t;let e=this.observers.find(t=>t.shouldFetchOnWindowFocus());null==e||e.refetch({cancelRefetch:!1}),null===(t=(0,d._)(this,o))||void 0===t||t.continue()}onOnline(){var t;let e=this.observers.find(t=>t.shouldFetchOnReconnect());null==e||e.refetch({cancelRefetch:!1}),null===(t=(0,d._)(this,o))||void 0===t||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),(0,d._)(this,n).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||((0,d._)(this,o)&&((0,d._)(this,l)?(0,d._)(this,o).cancel({revert:!0}):(0,d._)(this,o).cancelRetry()),this.scheduleGc()),(0,d._)(this,n).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||(0,p._)(this,u,F).call(this,{type:"invalidate"})}async fetch(t,e){var s,i,h,c,f,y,m,w,C,g,S,U;if("idle"!==this.state.fetchStatus&&(null===(s=(0,d._)(this,o))||void 0===s?void 0:s.status())!=="rejected"){if(void 0!==this.state.data&&(null==e?void 0:e.cancelRefetch))this.cancel({silent:!0});else if((0,d._)(this,o))return(0,d._)(this,o).continueRetry(),(0,d._)(this,o).promise}if(t&&this.setOptions(t),!this.options.queryFn){let t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}let A=new AbortController,O=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>((0,v._)(this,l,!0),A.signal)})},k=()=>{let t=(0,_.cG)(this.options,e),s=(()=>{let t={client:(0,d._)(this,r),queryKey:this.queryKey,meta:this.meta};return O(t),t})();return((0,v._)(this,l,!1),this.options.persister)?this.options.persister(t,s,this):t(s)},q=(()=>{let t={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:(0,d._)(this,r),state:this.state,fetchFn:k};return O(t),t})();null===(i=this.options.behavior)||void 0===i||i.onFetch(q,this),(0,v._)(this,a,this.state),("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(h=q.fetchOptions)||void 0===h?void 0:h.meta))&&(0,p._)(this,u,F).call(this,{type:"fetch",meta:null===(c=q.fetchOptions)||void 0===c?void 0:c.meta}),(0,v._)(this,o,(0,b.Mz)({initialPromise:null==e?void 0:e.initialPromise,fn:q.fetchFn,onCancel:t=>{t instanceof b.p8&&t.revert&&this.setState({...(0,d._)(this,a),fetchStatus:"idle"}),A.abort()},onFail:(t,e)=>{(0,p._)(this,u,F).call(this,{type:"failed",failureCount:t,error:e})},onPause:()=>{(0,p._)(this,u,F).call(this,{type:"pause"})},onContinue:()=>{(0,p._)(this,u,F).call(this,{type:"continue"})},retry:q.options.retry,retryDelay:q.options.retryDelay,networkMode:q.options.networkMode,canRun:()=>!0}));try{let t=await (0,d._)(this,o).start();if(void 0===t)throw Error("".concat(this.queryHash," data is undefined"));return this.setData(t),null===(f=(y=(0,d._)(this,n).config).onSuccess)||void 0===f||f.call(y,t,this),null===(m=(w=(0,d._)(this,n).config).onSettled)||void 0===m||m.call(w,t,this.state.error,this),t}catch(t){if(t instanceof b.p8){if(t.silent)return(0,d._)(this,o).promise;if(t.revert){if(void 0===this.state.data)throw t;return this.state.data}}throw(0,p._)(this,u,F).call(this,{type:"error",error:t}),null===(C=(g=(0,d._)(this,n).config).onError)||void 0===C||C.call(g,t,this),null===(S=(U=(0,d._)(this,n).config).onSettled)||void 0===S||S.call(U,this.state.data,t,this),t}finally{this.scheduleGc()}}constructor(t){var e;super(),(0,f._)(this,u),(0,c._)(this,i,{writable:!0,value:void 0}),(0,c._)(this,a,{writable:!0,value:void 0}),(0,c._)(this,n,{writable:!0,value:void 0}),(0,c._)(this,r,{writable:!0,value:void 0}),(0,c._)(this,o,{writable:!0,value:void 0}),(0,c._)(this,h,{writable:!0,value:void 0}),(0,c._)(this,l,{writable:!0,value:void 0}),(0,v._)(this,l,!1),(0,v._)(this,h,t.defaultOptions),this.setOptions(t.options),this.observers=[],(0,v._)(this,r,t.client),(0,v._)(this,n,(0,d._)(this,r).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,(0,v._)(this,i,S(this.options)),this.state=null!==(e=t.state)&&void 0!==e?e:(0,d._)(this,i),this.scheduleGc()}});function C(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,b.Kw)(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}function g(t,e){return{data:t,dataUpdatedAt:null!=e?e:Date.now(),error:null,isInvalidated:!1,status:"success"}}function S(t){let e="function"==typeof t.initialData?t.initialData():t.initialData,s=void 0!==e,i=s?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?null!=i?i:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function F(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":var s;return{...e,...C(e.data,this.options),fetchMeta:null!==(s=t.meta)&&void 0!==s?s:null};case"success":let i={...e,...g(t.data,t.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return(0,v._)(this,a,t.manual?i:void 0),i;case"error":let n=t.error;return{...e,error:n,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),y.Vr.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),(0,d._)(this,n).notify({query:this,type:"updated",action:t})})}}}]);